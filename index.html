<!DOCTYPE html>
<html>
<head>
    <title>Firebase Harita</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY"></script>
    <style>
        #map {
            width: 100%;
            height: 100vh;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    
    <script>
        // ğŸ”¥ Firebase KonfigÃ¼rasyonu
        const firebaseConfig = {
            apiKey: "FIREBASE_API_KEY",
            authDomain: "FIREBASE_AUTH_DOMAIN",
            databaseURL: "https://YOUR_DATABASE.firebaseio.com",
            projectId: "FIREBASE_PROJECT_ID",
            storageBucket: "FIREBASE_STORAGE_BUCKET",
            messagingSenderId: "FIREBASE_MESSAGING_SENDER_ID",
            appId: "FIREBASE_APP_ID"
        };

        // Firebase BaÅŸlat
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // ğŸŒ HaritayÄ± BaÅŸlat
        let map;
        function initMap() {
            map = new google.maps.Map(document.getElementById("map"), {
                center: { lat: 39.9334, lng: 32.8597 }, // Ankara merkez
                zoom: 6
            });

            // ğŸ“¡ Firebase'den Verileri Dinle
            database.ref("locations").on("value", (snapshot) => {
                const data = snapshot.val();
                if (!data) return;

                // ğŸ“Œ Haritadaki MarkerlarÄ± Temizle
                clearMarkers();

                // ğŸ“ Gelen Her Veri Ä°Ã§in Yeni Marker Ekle
                Object.keys(data).forEach((key) => {
                    const location = data[key];
                    addMarker(location.latitude, location.longitude, location.type);
                });
            });
        }

        let markers = [];
        
        // ğŸ“Œ Marker Ekleme Fonksiyonu
        function addMarker(lat, lng, type) {
            const color = type === "erzak" ? "red" : "blue"; // Erzak = KÄ±rmÄ±zÄ±, Malzeme = Mavi
            const marker = new google.maps.Marker({
                position: { lat, lng },
                map,
                title: type,
                icon: `http://maps.google.com/mapfiles/ms/icons/${color}-dot.png`
            });

            markers.push(marker);
        }

        // ğŸ“Œ HaritayÄ± Temizle
        function clearMarkers() {
            markers.forEach(marker => marker.setMap(null));
            markers = [];
        }

        // HaritayÄ± BaÅŸlat
        window.onload = initMap;
    </script>
</body>
</html>
